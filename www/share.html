<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
  <script src="components/loader.js"></script>
  <script src="lib/onsenui/js/onsenui.min.js"></script>
  <script src="components/ncmb/ncmb.min.js"></script>
    <script src="components/Chart.js/samples/utils.js"></script>
  <script src="components/Chart.js/dist/Chart.bundle.js"></script>
  <script src="js/mobileSelect.js" type="text/javascript"></script>
  <script  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCqx7QRK_GoT0Zh64cyqKevZwsDftFBbpY" type="text/javascript"></script>

  <link rel="stylesheet" href="components/loader.css">
  <link rel="stylesheet" href="lib/onsenui/css/onsenui.css">
  <link rel="stylesheet" href="lib/onsenui/css/onsen-css-components.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" type="text/css" href="css/mobileSelect.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">

    <script>
       window.fn = {};

window.fn.toggleMenu = function () {
  document.getElementById('appSplitter').right.toggle();
};

window.fn.loadView = function (index) {
  document.getElementById('appTabbar').setActiveTab(index);
  document.getElementById('sidemenu').close();
};

window.fn.loadLink = function (url) {
  window.open(url, '_blank');
};

window.fn.pushPage = function (page, anim) {
  if (anim) {
    document.getElementById('appNavigator').pushPage(page.id, { data: { title: page.title }, animation: anim });
  } else {
    document.getElementById('appNavigator').pushPage(page.id, { data: { title: page.title } });
  }
};
 

 
    </script>
</head>
<body>
   <ons-navigator id="appNavigator" swipeable swipe-target-width="80px">
  <ons-page>
    <ons-splitter id="appSplitter">
      <ons-splitter-side id="sidemenu" page="sidemenu.html" swipeable side="right" collapse="" width="260px"></ons-splitter-side>
      <ons-splitter-content page="tabbar.html"></ons-splitter-content>
    </ons-splitter>
  </ons-page>
</ons-navigator>

<template id="tabbar.html">
  <ons-page id="tabbar-page">
    <ons-toolbar>
      <div class="center">一覧</div>
      <div class="right">
        <ons-toolbar-button onclick="fn.toggleMenu()">
          <ons-icon icon="ion-navicon, material:md-menu"></ons-icon>
        </ons-toolbar-button>
      </div>
    </ons-toolbar>
    <ons-tabbar swipeable id="appTabbar" position="auto">
      <ons-tab label="一覧" icon="ion-home" page="home.html" active></ons-tab>
      <ons-tab label="作成" icon="ion-edit" page="write.html"></ons-tab>
    
    </ons-tabbar>

    <script>
      ons.getScriptPage().addEventListener('prechange', function(event) {
        if (event.target.matches('#appTabbar')) {
          event.currentTarget.querySelector('ons-toolbar .center').innerHTML = event.tabItem.getAttribute('label');
        }
    
      });
    </script>
  </ons-page>
</template>

<template id="sidemenu.html">
  <ons-page>
    <div class="profile-pic">
      <img src="https://monaca.io/img/logos/download_image_onsenui_01.png">
    </div>

    <ons-list-title>Access</ons-list-title>
    <ons-list>
      <ons-list-item onclick="window.location.href='Home.html';">
        <div class="left">
          <ons-icon fixed-width class="list-item__icon" icon="ion-home, material:md-home"></ons-icon>
        </div>
        <div class="center">
          主页
        </div>
        <div class="right">
          <ons-icon icon="fa-link"></ons-icon>
        </div>
      </ons-list-item>
       <ons-list-item onclick="fn.loadView(0)">
        <div class="left">
          <ons-icon fixed-width class="list-item__icon" icon="ion-image, material:md-home"></ons-icon>
        </div>
        <div class="center">
          一覧
        </div>
        <div class="right">
          <ons-icon icon="fa-link"></ons-icon>
        </div>
      </ons-list-item>
      <ons-list-item onclick="fn.loadView(1)">
        <div class="left">
          <ons-icon fixed-width class="list-item__icon" icon="ion-edit, material:md-edit"></ons-icon>
        </div>
        <div class="center">
          作成
        </div>
        <div class="right">
          <ons-icon icon="fa-link"></ons-icon>
        </div>
      </ons-list-item>
    
    </ons-list>

    <ons-list-title style="margin-top: 10px">Links</ons-list-title>
    <ons-list>
      <ons-list-item onclick="fn.loadLink('https://onsen.io/v2/docs/guide/js/')">
        <div class="left">
          <ons-icon fixed-width class="list-item__icon" icon="ion-document-text"></ons-icon>
        </div>
        <div class="center">
          Docs
        </div>
        <div class="right">
          <ons-icon icon="fa-external-link"></ons-icon>
        </div>
      </ons-list-item>
      <ons-list-item onclick="fn.loadLink('https://github.com/OnsenUI/OnsenUI')">
        <div class="left">
          <ons-icon fixed-width class="list-item__icon" icon="ion-social-github"></ons-icon>
        </div>
        <div class="center">
          GitHub
        </div>
        <div class="right">
          <ons-icon icon="fa-external-link"></ons-icon>
        </div>
      </ons-list-item>
      <ons-list-item onclick="fn.loadLink('https://community.onsen.io/')">
        <div class="left">
          <ons-icon fixed-width class="list-item__icon" icon="ion-chatboxes"></ons-icon>
        </div>
        <div class="center">
          Forum
        </div>
        <div class="right">
          <ons-icon icon="fa-external-link"></ons-icon>
        </div>
      </ons-list-item>
      <ons-list-item onclick="fn.loadLink('https://twitter.com/Onsen_UI')">
        <div class="left">
          <ons-icon fixed-width class="list-item__icon" icon="ion-social-twitter"></ons-icon>
        </div>
        <div class="center">
          Twitter
        </div>
        <div class="right">
          <ons-icon icon="fa-external-link"></ons-icon>
        </div>
      </ons-list-item>
    </ons-list>

    <script>
      ons.getScriptPage().onInit = function() {
        // Set ons-splitter-side animation
        this.parentElement.setAttribute('animation', ons.platform.isAndroid() ? 'overlay' : 'reveal');
      };
    </script>

    <style>
      .profile-pic {
        width: 200px;
        background-color: #fff;
        margin: 20px auto 10px;
        border: 1px solid #999;
        border-radius: 4px;
      }

      .profile-pic > img {
        display: block;
        max-width: 100%;
      }

      ons-list-item {
        color: #444;
      }
    </style>
  </ons-page>
</template>

<template id="home.html">
 　<ons-page>
    <p class="intro">
      This is a kitchen sink example that shows off the components of Onsen UI.<br><br>
    </p>
    <ons-card onclick="fn.pushPage({'id': 'share1.html', 'title': '詳細'})">
     <div class="title">
      <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1530810684294&di=8aca6ce7fdf711a0d456b4b5df6e7403&imgtype=0&src=http%3A%2F%2Fimg.sportq.com%2Fsportqimg%2F201509%2F7d4700c07c65db815afed0ca03ee39fc201509182319180.jpg%3FimageView%2F1%2Fw%2F750%2Fh%2F750"　width="320" height="240">
      </div>
      <div class="content">
          <p class="icontent"></p>
          
      </div>     
      </div>
    </ons-card>
      
   <script>
     function GetUimageInfo(){
         var ncmb = new NCMB("dd411920ff7852038a3d55414c3447b88c5e842ace7268254078b113d065398c","23304def33b24aeed4fe1ae5325a77c1ffbe3e44067c0a3716b47aefd4297e05");
       var usertitle=0
       var userimage = ncmb.DataStore("Uimage");  
    　　userimage.fetchAll().then(function(results){
    　　    for (var i = 0; i < results.length; i++) {
                      var object = results[i];
                       usertitle = object.get("Utitle");
                 document.querySelector('.icontent').innerHTML=usertitle;
    　　    }
    　　})
    　　 .catch(function(err){
          console.log(err);
    　　});
       }
       
       
       
   </script>
    <style>
      .intro {
        text-align: center;
        padding: 0 20px;
        margin-top: 40px;
      }

      ons-card {
        cursor: pointer;
        color: #333;
      }

      .card__title,
      .card--material__title {
        font-size: 20px;
      }
    </style>
  </ons-page>
</template>

<template id="write.html">
  <ons-page id="forms-page">
    <ons-list>
      <ons-list-header>Title</ons-list-header>
      <ons-list-item class="input-items">
        <div class="left">
          <ons-icon icon="fa-book" class="list-item__icon"></ons-icon>
        </div>
        <label class="center">
        <ons-input type ="text" id="nameinput" float maxlength="20" placeholder="Title"></ons-input>
      </label>
      </ons-list-item>
     <ons-list-item class="input-items">
       
       <div class="left">    
 <ons-button class="button" style="margin: 6px 0" onclick="snapPicture()">写真を撮る</ons-button>
 </div>
 <br>
    <img id="showImage" src="http://p2.qhimgs4.com/t01be93be2eca3249d5.jpg" width="200" height="250"/>
       
      
      </ons-list-item>
      <ons-list-item>
        <div class="right right-label">
          <span id="name-display">Hello anonymous!</span>
          <ons-icon icon="fa-hand-spock-o" size="lg" class="right-icon"></ons-icon>
        </div>
      </ons-list-item>

      <ons-list-header>Content</ons-list-header>
       <textarea type="text"  id="namecontent" class="textarea textarea--transparent" rows="3" placeholder="Textarea"></textarea>     
    
      <ons-list-item>
        <div id="fruit-love" class="center">
          I love Sports!
        </div>
      </ons-list-item>
      <p style="text-align: center">
       <ons-button onclick="onClick()">提出</ons-button>
     </p>    
    
   
      <script>
      　 var ncmb = new NCMB("dd411920ff7852038a3d55414c3447b88c5e842ace7268254078b113d065398c","23304def33b24aeed4fe1ae5325a77c1ffbe3e44067c0a3716b47aefd4297e05");
        function snapPicture () {
        navigator.camera.getPicture (onSuccess, onFail,
            { quality: 50, destinationType: Camera.DestinationType.DATA_URL});

        //成功した際に呼ばれるコールバック関数
       function onSuccess (imageData) {
            // 画像を表示
            var image = document.getElementById ('showImage');
            image.src = "data:image/jpeg;base64," + imageData;

            var byteCharacters = toBlob(imageData);
            var myDate = new Date();
            var time = myDate.getMilliseconds()
            var filename = time + ".png"
           var title　=　document.getElementById("nameinput").value;
             var Uimage = ncmb.DataStore('Uimage');
              var uimage = new Uimage();
            uimage.set("Utitle", title)
                    .set("Uimagename", filename)
                    .save()
                      .then(function(results){
                      });
       ncmb.File.upload(filename, byteCharacters)
            .then(function() {
            })
            .catch(function(error) {
              alert(JSON.stringify(error));
            });
      
      }
         

        //失敗した場合に呼ばれるコールバック関数
        function onFail (message) {
            alert ('カメラエラーです: ' + message);
        } 
    }
    
    function toBlob(base64) {
        var bin = atob(base64.replace(/^.*,/, ''));
        var buffer = new Uint8Array(bin.length);
        for (var i = 0; i < bin.length; i++) {
            buffer[i] = bin.charCodeAt(i);
        }
        // Blobを作成
        try{
            var blob = new Blob([buffer.buffer], {
                type: 'image/png'
            });
        }catch (e){
            return false;
        }
        return blob;
  }
  
    
         function onClick(){
          var title　=　document.getElementById("nameinput").value;
          var content　=　document.getElementById("namecontent").value;　
             var Imessage = ncmb.DataStore('Imessage');
              var imessage = new Imessage();
            imessage.set("Ititle", title)
                    .set("Icontent", content)
                    .save()
                      .then(function(results){
                  if(title == ""){
           alert ('タイトルを入れてください！' );
              return false;
             }   
             if(content == ""){
             alert ('内容を入れてください！' );    
            return false;
            }
             alert('提出しました！') 
              window.location.href='Home.html';
                      });
  　
  　 
         
  　
  　
  　}
    </script>

    <style>
      .right-icon {
        margin-left: 10px;
      }

      .right-label {
        color: #666;
      }
    </style>
  </ons-page>
</template>

<template id="share1.html">
  <ons-page id="share-page">
    <ons-toolbar>
   
     <div class="left"><ons-toolbar-button onclick="window.location.href='share.html';">戻り</ons-toolbar-button></div>
    
      <div class="center"></div>
    </ons-toolbar>



    <ons-list-title>
    <span id="name-display">Hello anonymous!</span>
          <ons-icon icon="fa-hand-spock-o" size="lg" class="right-icon"></ons-icon>    
        
    </ons-list-title>
    <ons-list modifier="inset">
      <ons-list-item tappable modifier="longdivider" >
        <div class="center">
        <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1530810684294&di=8aca6ce7fdf711a0d456b4b5df6e7403&imgtype=0&src=http%3A%2F%2Fimg.sportq.com%2Fsportqimg%2F201509%2F7d4700c07c65db815afed0ca03ee39fc201509182319180.jpg%3FimageView%2F1%2Fw%2F750%2Fh%2F750"　width="320" height="240">
        </div>
      </ons-list-item>
     
    </ons-list>

    <ons-list-title> <span id="name-display">Hello anonymous!</span><ons-icon icon="fa-hand-spock-o" size="lg" class="right-icon"></ons-icon>   </ons-list-title>
    <ons-list modifier="inset">
      <ons-list-item tappable modifier="longdivider" onclick="fn.showDialog('lorem-dialog')">
        <div class="center">
     <p>
     皆さま
嬉しいメッセージ
ありがとうございます

幸せな気持ちで
30歳迎えられました

心も体もたくさん使う
30代にしたいと思います

まだまだちっとも
大人になれない
吉高ですが
これからも
皆さまよろしくお願いします
(o^^o)(o^^o)(o^^o)(o^^o)
んーーーっぱっ💋💋💋💋💋    
     </p> 
        </div>
      </ons-list-item>
    </ons-list>


  
    <script>
     
    </script>

    <style>
      #lorem-dialog .dialog-container {
        height: 200px;
      }

      ons-list-title {
        margin-top: 20px;
      }
    </style>
  </ons-page>
</template>







</body>
</html>


